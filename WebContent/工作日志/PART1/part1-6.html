<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>6-另设</title>
    <link type="text/css" href="../styles/part1/6.css" rel="stylesheet">
</head>

<body>
<div>
    <p>另设</p>
    <hr/>
    <div class="input" contentEditable id="other"></div>
</div>

<div class="buttons">
        <button id="submit" onclick="submit()">提交</button>
    </div>

</body>
<script src="../scripts/jquery.js"></script>
<script>
    var Class=sessionStorage.getItem("class");
    window.onload=function(){
        show();
    }

    function submit(){
        $.ajax({
            type:"POST",
            url:"servlet/part1_6",
            data:{
                "Class":Class,
                "flag":1,
                "other":document.getElementById("other").innerText
            },
            success:function(data,status){
                console.log("另设上传成功");
            },
            error:function(data,status){
                alert("出错啦，快找管理员处理！");
            }
        });
    }

    function show(){
        $.ajax({
            type:"POST",
            url:"servlet/part1_6",
            data:{
                "Class":Class,
                "flag":0,
            },
            success:function(data,status){
                document.getElementById("other").innerText=data.other;
            },
            error:function(data,status){
                alert("出错啦，快找管理员处理！");
            }
        });
    }

    // $(window).bind('beforeunload', function () {
    //     submit();
    // });

</script>
</html>