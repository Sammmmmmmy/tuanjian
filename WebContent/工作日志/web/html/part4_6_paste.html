<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/home.css">
    <link rel="stylesheet" href="../css/home1.css">
    <link rel="stylesheet" href="../css/home4_2.css">
    <link type="text/css" href="../css/home4_6.css" rel="stylesheet">
    <title>part4_6</title>
</head>

<body>
<div class="body">
    <div class="right">
        <form action="">
            <h2>粘贴照片处：</h2>
            <div>
                <div id="input">
                    <div class="uploadImgBtn" id="uploadImgBtn">
                        <input class="uploadImg" type="file" name="file" id="file">
                        <img height=100px src="../images/add.png" alt="">
                    </div>
                </div>
                <div class="clear"></div>
                <div class="form_button">
                    <input type="reset" id="reset" name="reset">
                    <input type="submit" id="submit" name="submit">
                </div>
            </div>
        </form>
    </div>
</div>
</body>

<script type="text/javascript" src="../js/jquery.js"></script>
<script>
    $(document).ready(function () {
        //为外面的盒子绑定一个点击事件
        // $("#uploadImgBtn").click(function () {
        /*
        1、先获取input标签
        2、给input标签绑定change事件
        3、把图片回显
         */
        //            1、先回去input标签
        var $input = $("#file");
        //            2、给input标签绑定change事件
        var imgs = document.getElementById("input");
        $input.on("change", function () {
            //补充说明：因为我们给input标签设置multiple属性，因此一次可以上传多个文件
            //获取选择图片的个数
            var files = this.files;
            var length = files.length;
            console.log("选择了" + length + "张图片");
            //3、回显
            for (var i = 0; i < length; i++) {
                var fr = new FileReader(),
                    div = document.createElement('div'),
                    img = document.createElement("img");

                div.className = 'pic';

                fr.onload = function (e) {
                    console.log("回显了图片");
                    img.src = this.result;
                    div.appendChild(img);
                    imgs.appendChild(div);
                };
                fr.readAsDataURL(files[i]); //读取文件
            }

        })
    })

    // })
</script>

</html>